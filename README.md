
# Autotests GoDev
Разработка автотестов для сайта godev. 

Запуск автотестов: python -m pytest
Запуск автотестов с генерацией аллюр отчетов: python -m pytest --alluredir=allure-results
и далее  allure serve allure-results

Для запуска тестов только с конкретной меткой (например):  pytest -m fill_form_request_footer --alluredir=allure-results 
где fill_form_request_footer - метка @pytest.mark.fill_form_request_footer


---
## Технологии и интеграции
Python — основной язык программирования.
PyTest — фреймворк для написания тестов.
Selenium — фреймворк для автоматизации веб-тестирования.
Allure — система для генерации отчетов.
TestIT — платформа для управления тестированием и анализом результатов.
Jira — инструмент управления проектами и отслеживания задач.
---

## Подход к оформлению: 
1. название файлов через нижнее подчеркивание
2. название пакетов в нижнем регистре
3. названия классов - используется CamelCase 
4. названия переменных через нижнее подчеркивание в нижнем регистре
5. для сохранения единообразия используем одинарные кавычки ' ' (только если есть пересечение кавычек используем двойные для избежания конфликта)
6. для добавления документации используем """ тройные кавычки
7. все локаторы выносятся в класс Locators и используется распаковка кортежей при вызове локаторов, чтобы избегать нагромождения. 
ВНИМАНИЕ! Прежде чем добавить новый локатор зайди в класс Locators и проверь нет ли там нужного тебе локатора. 
8. Для форматирования кода используем клавиши Ctrl+Alt+L
9. Не используем конкатенацию из двух строк (logging.error('Ошибка!!! Заголовок не найден.' + stroka)), а используем общий вывод с форматированием строки через фигурные скобки logging.info(f"Заголовок на странице: '{title_text}'")

---
## Жизненный цикл теста
1. Инициализация конфигурации
2. Запуск браузера
3. Выполнение тестовых шагов
4. Сбор артефактов
5. Генерация отчета
---

##  Архитектура проекта

### Компоненты:
- **conftest.py** - централизованная конфигурация
- **base_page** - базовый класс с основными методами
- **page_elements** - паттерн для работы с элементами страниц
- **pages** - паттерн для работы со страницами
- **test** - папка с тестами на созданные страницы
- **constants.py** - константы
- **Locators** - класс для локаторов
- **myenv.env** - прокидываем env (для определения урлов и контуров на которых запускаем тесты)
- **load_env.py** - проверка и запуск env 

## Поиск элементов

1. Уникальные HTML-атрибуты (`id`, `name`)
2. Семантические CSS-селекторы (`input[type="email"]`)
3. Иерархические цепочки (`div.modal > button.confirm`)
4. XPath только для динамического контента

**Запрещено:**
    - Использовать жесткую индексацию 
    - Использовать жесткую иерархическую цепочку
    - Текст на языке интерфейса 

Для запуска с локалки на тесте меняем переменную environment (в файле conftest.py) с production на development.
В классе BasePage в конструкторе сменить os.getenv('PROD_PAGE', 'https://godev.agency/') на os.getenv('PROD_PAGE', 'https://godev.agency/')
В put_a_secret() в классе BasePage сделать тоже самое. 
В классе data_loader в методе put_a_secret_loader сделать тоже самое. 
